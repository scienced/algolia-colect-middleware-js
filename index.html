<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Algolia-Colect-frontend-middleware</title>
   </head>
   <body>
      <h1>algolia-colect-middleware-js testing page</h1>
      <hr>
      <h2>Search box </h2>
      Original Colect Webstore V2 search field:
      <a class="search_button hide-lg-down nav--link nav-bar reset-scroll">
         <!-- START-CONTENTBLOCK:search -->
         <form id="_sf_158965797" class="w3-container a4f-form a4f-searchform" method="GET" action="/webstore/v2/search">
            <div class="a4f-searchquery-container2">
               <span role="status" aria-live="polite" class="ui-helper-hidden-accessible"></span><input type="text" name="q" value="" class="w3-input w3-border a4f-searchquery ui-autocomplete-input" autocomplete="off" placeholder="search">
            </div>
            <div class="a4f-searchbutton-container">
               <button class="a4f-googlematerial a4f-searchbutton" type="submit" style="display: none;"></button>
            </div>
         </form>
      </a>
      
      <br>
      <hr>
      <h2>Algolia keys setup</h2>
      <p>This test page needs three Algolia items to work. You can also add the items manual via url properties.</p>
      <div>Algolia Application ID:
      <input name="searchTxt" type="text" maxlength="512" id="appid" class="searchField"/>
      </div>
      <div>Algolia API Key:
      <input name="searchTxt" type="text" maxlength="512" id="apikey" class="searchField"/>
      </div>
      <div>Index:
      <input name="searchTxt" type="text" maxlength="512" id="index" class="searchField"/>
   </div>
      <input type="button" value="Apply" OnClick="kk()"/>
      <br>


      <hr>
      <p>Github repo: <a href="https://github.com/scienced/algolia-colect-middleware-js">algolia-Colect-middleware-js </a></p>
      <p>CDN: <a href="https://www.jsdelivr.com/package/gh/scienced/algolia-colect-middleware-js"><img src="https://data.jsdelivr.com/v1/package/gh/scienced/algolia-colect-middleware-js/badge"></a></p>

      <script language="javascript" type="text/javascript">
   
    function kk(){
      var appid = document.getElementById('appid').value
      var apikey = document.getElementById('apikey').value
      var index = document.getElementById('index').value
      
      //console.log(appid + apikey + index);
      var newUrl = `/?location=${index}&algoliaid=${appid}&algoliakey=${apikey}`;
      console.log(newUrl)
      window.location = newUrl;
    }
</script>



      <script type="module" src="./main.js"></script> 

<!-- <script type="module" crossorigin src="https://jsdelivr.com/gh/scienced/algolia-colect-middleware-js@latest/dist/assets/index.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/scienced/algolia-colect-middleware-js@latest/dist/assets/style.css">-->

        <script>

         const PAGELOCATION = new URLSearchParams(window.location.search).get('location')
          const CUSTOMERLANGUAGE = new URLSearchParams(window.location.search).get('locale')
          const ALGOLIAID =new URLSearchParams(window.location.search).get('algoliaid')
          const ALGOLIAKEY = new URLSearchParams(window.location.search).get('algoliakey')

         var options = {
          customerCollection: `${PAGELOCATION}`,
          customerLanguage: "EN",
          customerId: "434783",
          algoliaApplicationId: `${ALGOLIAID}`,
          algoliaApiKey: `${ALGOLIAKEY}`,
          container: ".search_button"
         }
         window.options = options;
      </script>

   </body>
</html>